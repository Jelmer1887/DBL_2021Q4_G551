import { __decorate, __metadata } from "tslib";
import { Directive, EventEmitter, Input, Output } from '@angular/core';
let HotkeyDirective = class HotkeyDirective {
    constructor() {
        this.hotkeyClick = new EventEmitter();
    }
    createElement() {
        this.unregister();
        this.previousKey = this.hotkey;
        $('body').hotkey(this.hotkey, () => {
            this.hotkeyClick.emit();
        });
    }
    ngOnInit() {
        this.createElement();
    }
    ngOnChanges(changes) {
        this.createElement();
    }
    unregister() {
        if (this.previousKey) {
            $('body').off('keyup', null, { ns: 'hotkey-method-' + this.previousKey });
        }
    }
    ngOnDestroy() {
        this.unregister();
    }
};
__decorate([
    Input('m4-hotkey'),
    __metadata("design:type", String)
], HotkeyDirective.prototype, "hotkey", void 0);
__decorate([
    Output(),
    __metadata("design:type", Object)
], HotkeyDirective.prototype, "hotkeyClick", void 0);
HotkeyDirective = __decorate([
    Directive({
        selector: '[m4-hotkey]'
    }),
    __metadata("design:paramtypes", [])
], HotkeyDirective);
export { HotkeyDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG90a2V5LmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25nLW1ldHJvNC8iLCJzb3VyY2VzIjpbImxpYi9jb250cm9scy9ob3RrZXkvaG90a2V5LmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFnQyxNQUFNLEVBQWdCLE1BQU0sZUFBZSxDQUFDO0FBT2xILElBQWEsZUFBZSxHQUE1QixNQUFhLGVBQWU7SUFNMUI7UUFKVSxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7SUFJNUIsQ0FBQztJQUVSLGFBQWE7UUFDbkIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUUvQixDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO1lBQ2pDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDMUIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRUQsV0FBVyxDQUFDLE9BQXNCO1FBQ2hDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRU8sVUFBVTtRQUNoQixJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDcEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLEVBQUMsRUFBRSxFQUFFLGdCQUFnQixHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUMsQ0FBQyxDQUFDO1NBQ3pFO0lBQ0gsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDcEIsQ0FBQztDQUNGLENBQUE7QUFqQ3FCO0lBQW5CLEtBQUssQ0FBQyxXQUFXLENBQUM7OytDQUFnQjtBQUN6QjtJQUFULE1BQU0sRUFBRTs7b0RBQWtDO0FBRmhDLGVBQWU7SUFIM0IsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLGFBQWE7S0FDeEIsQ0FBQzs7R0FDVyxlQUFlLENBa0MzQjtTQWxDWSxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEaXJlY3RpdmUsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgU2ltcGxlQ2hhbmdlc30gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5kZWNsYXJlIHZhciAkOiBhbnk7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1ttNC1ob3RrZXldJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgSG90a2V5RGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSB7XHJcbiAgQElucHV0KCdtNC1ob3RrZXknKSBob3RrZXk6IHN0cmluZztcclxuICBAT3V0cHV0KCkgaG90a2V5Q2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIHByaXZhdGUgcHJldmlvdXNLZXk6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICBwcml2YXRlIGNyZWF0ZUVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLnVucmVnaXN0ZXIoKTtcclxuICAgIHRoaXMucHJldmlvdXNLZXkgPSB0aGlzLmhvdGtleTtcclxuXHJcbiAgICAkKCdib2R5JykuaG90a2V5KHRoaXMuaG90a2V5LCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuaG90a2V5Q2xpY2suZW1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuY3JlYXRlRWxlbWVudCgpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgdGhpcy5jcmVhdGVFbGVtZW50KCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHVucmVnaXN0ZXIoKSB7XHJcbiAgICBpZiAodGhpcy5wcmV2aW91c0tleSkge1xyXG4gICAgICAkKCdib2R5Jykub2ZmKCdrZXl1cCcsIG51bGwsIHtuczogJ2hvdGtleS1tZXRob2QtJyArIHRoaXMucHJldmlvdXNLZXl9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy51bnJlZ2lzdGVyKCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==