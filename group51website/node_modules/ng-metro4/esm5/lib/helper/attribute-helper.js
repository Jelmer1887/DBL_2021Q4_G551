import { observerClassExceptions } from './lists';
var AttributeHelper = /** @class */ (function () {
    function AttributeHelper() {
    }
    /**
     * Sets an attribute to the element or removes the attribute if no value is given
     * @param renderer The renderer
     * @param element The element
     * @param attribute The attribute
     * @param value The optional value
     */
    AttributeHelper.setAttribute = function (renderer, element, attribute, value) {
        if (value) {
            renderer.setAttribute(element.nativeElement, attribute, value);
        }
        else {
            renderer.removeAttribute(element.nativeElement, attribute);
        }
    };
    /**
     * Creates a class observer on an element
     * @param element The element to observe
     * @param newClassValues The function to be called on change
     */
    AttributeHelper.createObserver = function (element, newClassValues) {
        if (!element || !element.nativeElement) {
            return null;
        }
        var previousClassValue = [];
        var classValueCallback = function () {
            var classValue = element.nativeElement.getAttribute('class') || '';
            var classValueArray = classValue.split(' ')
                .filter(function (v) { return !!v && observerClassExceptions.indexOf(v) === -1; });
            newClassValues(classValueArray, previousClassValue);
            previousClassValue = classValueArray;
        };
        var classObserver = new MutationObserver(classValueCallback);
        classObserver.observe(element.nativeElement, {
            attributeFilter: ['class'],
            attributes: true
        });
        classValueCallback();
        return classObserver;
    };
    return AttributeHelper;
}());
export { AttributeHelper };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXR0cmlidXRlLWhlbHBlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25nLW1ldHJvNC8iLCJzb3VyY2VzIjpbImxpYi9oZWxwZXIvYXR0cmlidXRlLWhlbHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUMsdUJBQXVCLEVBQUMsTUFBTSxTQUFTLENBQUM7QUFFaEQ7SUFBQTtJQTZDQSxDQUFDO0lBNUNDOzs7Ozs7T0FNRztJQUNXLDRCQUFZLEdBQTFCLFVBQTJCLFFBQW1CLEVBQUUsT0FBbUIsRUFBRSxTQUFpQixFQUFFLEtBQVc7UUFDakcsSUFBSSxLQUFLLEVBQUU7WUFDVCxRQUFRLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ2hFO2FBQU07WUFDTCxRQUFRLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsU0FBUyxDQUFDLENBQUM7U0FDNUQ7SUFDSCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNXLDhCQUFjLEdBQTVCLFVBQTZCLE9BQW1CLEVBQ25CLGNBQTRFO1FBQ3ZHLElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFO1lBQ3RDLE9BQU8sSUFBSSxDQUFDO1NBQ2I7UUFFRCxJQUFJLGtCQUFrQixHQUFhLEVBQUUsQ0FBQztRQUN0QyxJQUFNLGtCQUFrQixHQUFHO1lBQ3pCLElBQU0sVUFBVSxHQUFXLE9BQU8sQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUM3RSxJQUFNLGVBQWUsR0FBYSxVQUFVLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztpQkFDcEQsTUFBTSxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsQ0FBQyxDQUFDLENBQUMsSUFBSSx1QkFBdUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQWhELENBQWdELENBQUMsQ0FBQztZQUNqRSxjQUFjLENBQUMsZUFBZSxFQUFFLGtCQUFrQixDQUFDLENBQUM7WUFDcEQsa0JBQWtCLEdBQUcsZUFBZSxDQUFDO1FBQ3ZDLENBQUMsQ0FBQztRQUNGLElBQU0sYUFBYSxHQUFHLElBQUksZ0JBQWdCLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUUvRCxhQUFhLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUU7WUFDM0MsZUFBZSxFQUFFLENBQUMsT0FBTyxDQUFDO1lBQzFCLFVBQVUsRUFBRSxJQUFJO1NBQ2pCLENBQUMsQ0FBQztRQUVILGtCQUFrQixFQUFFLENBQUM7UUFDckIsT0FBTyxhQUFhLENBQUM7SUFDdkIsQ0FBQztJQUNILHNCQUFDO0FBQUQsQ0FBQyxBQTdDRCxJQTZDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RWxlbWVudFJlZiwgUmVuZGVyZXIyfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtvYnNlcnZlckNsYXNzRXhjZXB0aW9uc30gZnJvbSAnLi9saXN0cyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlSGVscGVyIHtcclxuICAvKipcclxuICAgKiBTZXRzIGFuIGF0dHJpYnV0ZSB0byB0aGUgZWxlbWVudCBvciByZW1vdmVzIHRoZSBhdHRyaWJ1dGUgaWYgbm8gdmFsdWUgaXMgZ2l2ZW5cclxuICAgKiBAcGFyYW0gcmVuZGVyZXIgVGhlIHJlbmRlcmVyXHJcbiAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcclxuICAgKiBAcGFyYW0gYXR0cmlidXRlIFRoZSBhdHRyaWJ1dGVcclxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIG9wdGlvbmFsIHZhbHVlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBzZXRBdHRyaWJ1dGUocmVuZGVyZXI6IFJlbmRlcmVyMiwgZWxlbWVudDogRWxlbWVudFJlZiwgYXR0cmlidXRlOiBzdHJpbmcsIHZhbHVlPzogYW55KSB7XHJcbiAgICBpZiAodmFsdWUpIHtcclxuICAgICAgcmVuZGVyZXIuc2V0QXR0cmlidXRlKGVsZW1lbnQubmF0aXZlRWxlbWVudCwgYXR0cmlidXRlLCB2YWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudC5uYXRpdmVFbGVtZW50LCBhdHRyaWJ1dGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIGNsYXNzIG9ic2VydmVyIG9uIGFuIGVsZW1lbnRcclxuICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBvYnNlcnZlXHJcbiAgICogQHBhcmFtIG5ld0NsYXNzVmFsdWVzIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gY2hhbmdlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBjcmVhdGVPYnNlcnZlcihlbGVtZW50OiBFbGVtZW50UmVmLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q2xhc3NWYWx1ZXM6IChuZXdDbGFzc1ZhbHVlczogc3RyaW5nW10sIG9sZENsYXNzVmFsdWVzOiBzdHJpbmdbXSkgPT4gdm9pZCk6IE11dGF0aW9uT2JzZXJ2ZXIge1xyXG4gICAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50Lm5hdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByZXZpb3VzQ2xhc3NWYWx1ZTogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnN0IGNsYXNzVmFsdWVDYWxsYmFjayA9ICgpID0+IHtcclxuICAgICAgY29uc3QgY2xhc3NWYWx1ZTogc3RyaW5nID0gZWxlbWVudC5uYXRpdmVFbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJztcclxuICAgICAgY29uc3QgY2xhc3NWYWx1ZUFycmF5OiBzdHJpbmdbXSA9IGNsYXNzVmFsdWUuc3BsaXQoJyAnKVxyXG4gICAgICAgIC5maWx0ZXIodiA9PiAhIXYgJiYgb2JzZXJ2ZXJDbGFzc0V4Y2VwdGlvbnMuaW5kZXhPZih2KSA9PT0gLTEpO1xyXG4gICAgICBuZXdDbGFzc1ZhbHVlcyhjbGFzc1ZhbHVlQXJyYXksIHByZXZpb3VzQ2xhc3NWYWx1ZSk7XHJcbiAgICAgIHByZXZpb3VzQ2xhc3NWYWx1ZSA9IGNsYXNzVmFsdWVBcnJheTtcclxuICAgIH07XHJcbiAgICBjb25zdCBjbGFzc09ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2xhc3NWYWx1ZUNhbGxiYWNrKTtcclxuXHJcbiAgICBjbGFzc09ic2VydmVyLm9ic2VydmUoZWxlbWVudC5uYXRpdmVFbGVtZW50LCB7XHJcbiAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddLFxyXG4gICAgICBhdHRyaWJ1dGVzOiB0cnVlXHJcbiAgICB9KTtcclxuXHJcbiAgICBjbGFzc1ZhbHVlQ2FsbGJhY2soKTtcclxuICAgIHJldHVybiBjbGFzc09ic2VydmVyO1xyXG4gIH1cclxufVxyXG4iXX0=