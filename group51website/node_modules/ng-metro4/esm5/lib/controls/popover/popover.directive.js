import { __decorate, __metadata, __param } from "tslib";
import { Directive, ElementRef, Inject, Input, OnChanges, OnInit, Renderer2, SimpleChanges } from '@angular/core';
import { DOCUMENT } from '@angular/common';
import { AttributeHelper } from '../../helper/attribute-helper';
import { asapScheduler } from 'rxjs';
var PopoverDirective = /** @class */ (function () {
    function PopoverDirective(element, renderer, document) {
        this.element = element;
        this.renderer = renderer;
        this.document = document;
        this.popoverPosition = 'top';
    }
    PopoverDirective.prototype.createElement = function () {
        var _this = this;
        AttributeHelper.setAttribute(this.renderer, this.element, 'data-popover-text', this.popoverText);
        AttributeHelper.setAttribute(this.renderer, this.element, 'data-popover-position', this.popoverPosition);
        AttributeHelper.setAttribute(this.renderer, this.element, 'data-popover-trigger', this.popoverTrigger);
        AttributeHelper.setAttribute(this.renderer, this.element, 'data-popover-hide', this.popoverHide);
        AttributeHelper.setAttribute(this.renderer, this.element, 'data-cls-popover', this.clsPopover);
        AttributeHelper.setAttribute(this.renderer, this.element, 'data-close-button', this.closeBtn);
        asapScheduler.schedule(function () {
            if (!_this.popoverObj) {
                _this.popoverObj = $(_this.element.nativeElement).popover().data('popover');
            }
            else {
                _this.popoverObj.options.popoverText = _this.popoverText;
                _this.popoverObj.options.popoverPosition = _this.popoverPosition;
                _this.popoverObj.options.popoverTrigger = _this.popoverTrigger;
                _this.popoverObj.options.popoverHide = _this.popoverHide;
                _this.popoverObj.options.closeButton = _this.closeBtn;
                _this.popoverObj.options.clsPopover = _this.clsPopover;
            }
        });
    };
    PopoverDirective.prototype.ngOnInit = function () {
        this.createElement();
    };
    PopoverDirective.prototype.ngOnChanges = function (changes) {
        this.createElement();
    };
    PopoverDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 },
        { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
    ]; };
    __decorate([
        Input('m4-popover'),
        __metadata("design:type", String)
    ], PopoverDirective.prototype, "popoverText", void 0);
    __decorate([
        Input('popover-position'),
        __metadata("design:type", String)
    ], PopoverDirective.prototype, "popoverPosition", void 0);
    __decorate([
        Input('popover-trigger'),
        __metadata("design:type", String)
    ], PopoverDirective.prototype, "popoverTrigger", void 0);
    __decorate([
        Input('popover-hide'),
        __metadata("design:type", Number)
    ], PopoverDirective.prototype, "popoverHide", void 0);
    __decorate([
        Input('popover-close-button'),
        __metadata("design:type", Boolean)
    ], PopoverDirective.prototype, "closeBtn", void 0);
    __decorate([
        Input('cls-popover'),
        __metadata("design:type", Number)
    ], PopoverDirective.prototype, "clsPopover", void 0);
    PopoverDirective = __decorate([
        Directive({
            selector: '[m4-popover]'
        }),
        __param(2, Inject(DOCUMENT)),
        __metadata("design:paramtypes", [ElementRef, Renderer2, Object])
    ], PopoverDirective);
    return PopoverDirective;
}());
export { PopoverDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wb3Zlci5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZy1tZXRybzQvIiwic291cmNlcyI6WyJsaWIvY29udHJvbHMvcG9wb3Zlci9wb3BvdmVyLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDaEgsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBQ3pDLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSwrQkFBK0IsQ0FBQztBQUM5RCxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBUW5DO0lBVUUsMEJBQW9CLE9BQW1CLEVBQVUsUUFBbUIsRUFBNEIsUUFBUTtRQUFwRixZQUFPLEdBQVAsT0FBTyxDQUFZO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBVztRQUE0QixhQUFRLEdBQVIsUUFBUSxDQUFBO1FBUjdFLG9CQUFlLEdBQXFCLEtBQUssQ0FBQztJQVVyRSxDQUFDO0lBRU8sd0NBQWEsR0FBckI7UUFBQSxpQkFvQkM7UUFuQkMsZUFBZSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2pHLGVBQWUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLHVCQUF1QixFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUN6RyxlQUFlLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDdkcsZUFBZSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2pHLGVBQWUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLGtCQUFrQixFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUMvRixlQUFlLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFOUYsYUFBYSxDQUFDLFFBQVEsQ0FBQztZQUNyQixJQUFJLENBQUMsS0FBSSxDQUFDLFVBQVUsRUFBRTtnQkFDcEIsS0FBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsS0FBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDM0U7aUJBQU07Z0JBQ0wsS0FBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLEtBQUksQ0FBQyxXQUFXLENBQUM7Z0JBQ3ZELEtBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLGVBQWUsR0FBRyxLQUFJLENBQUMsZUFBZSxDQUFDO2dCQUMvRCxLQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsS0FBSSxDQUFDLGNBQWMsQ0FBQztnQkFDN0QsS0FBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLEtBQUksQ0FBQyxXQUFXLENBQUM7Z0JBQ3ZELEtBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxLQUFJLENBQUMsUUFBUSxDQUFDO2dCQUNwRCxLQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSSxDQUFDLFVBQVUsQ0FBQzthQUN0RDtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELG1DQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUVELHNDQUFXLEdBQVgsVUFBWSxPQUFzQjtRQUNoQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQzs7Z0JBaEM0QixVQUFVO2dCQUFvQixTQUFTO2dEQUFHLE1BQU0sU0FBQyxRQUFROztJQVRqRTtRQUFwQixLQUFLLENBQUMsWUFBWSxDQUFDOzt5REFBcUI7SUFDZDtRQUExQixLQUFLLENBQUMsa0JBQWtCLENBQUM7OzZEQUEyQztJQUMzQztRQUF6QixLQUFLLENBQUMsaUJBQWlCLENBQUM7OzREQUFvQztJQUN0QztRQUF0QixLQUFLLENBQUMsY0FBYyxDQUFDOzt5REFBcUI7SUFDWjtRQUE5QixLQUFLLENBQUMsc0JBQXNCLENBQUM7O3NEQUFtQjtJQUMzQjtRQUFyQixLQUFLLENBQUMsYUFBYSxDQUFDOzt3REFBb0I7SUFOOUIsZ0JBQWdCO1FBSDVCLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxjQUFjO1NBQ3pCLENBQUM7UUFXdUUsV0FBQSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUE7eUNBQTFELFVBQVUsRUFBb0IsU0FBUztPQVZ6RCxnQkFBZ0IsQ0E0QzVCO0lBQUQsdUJBQUM7Q0FBQSxBQTVDRCxJQTRDQztTQTVDWSxnQkFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0RpcmVjdGl2ZSwgRWxlbWVudFJlZiwgSW5qZWN0LCBJbnB1dCwgT25DaGFuZ2VzLCBPbkluaXQsIFJlbmRlcmVyMiwgU2ltcGxlQ2hhbmdlc30gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7RE9DVU1FTlR9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XHJcbmltcG9ydCB7QXR0cmlidXRlSGVscGVyfSBmcm9tICcuLi8uLi9oZWxwZXIvYXR0cmlidXRlLWhlbHBlcic7XHJcbmltcG9ydCB7YXNhcFNjaGVkdWxlcn0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7UG9wb3ZlclRyaWdnZXJUeXBlLCBQb3NpdGlvbkJhc2VUeXBlfSBmcm9tICcuLi8uLi9oZWxwZXIvdHlwZXMnO1xyXG5cclxuZGVjbGFyZSB2YXIgJDogYW55O1xyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgc2VsZWN0b3I6ICdbbTQtcG9wb3Zlcl0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBQb3BvdmVyRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gIEBJbnB1dCgnbTQtcG9wb3ZlcicpIHBvcG92ZXJUZXh0OiBzdHJpbmc7XHJcbiAgQElucHV0KCdwb3BvdmVyLXBvc2l0aW9uJykgcG9wb3ZlclBvc2l0aW9uOiBQb3NpdGlvbkJhc2VUeXBlID0gJ3RvcCc7XHJcbiAgQElucHV0KCdwb3BvdmVyLXRyaWdnZXInKSBwb3BvdmVyVHJpZ2dlcjogUG9wb3ZlclRyaWdnZXJUeXBlO1xyXG4gIEBJbnB1dCgncG9wb3Zlci1oaWRlJykgcG9wb3ZlckhpZGU6IG51bWJlcjtcclxuICBASW5wdXQoJ3BvcG92ZXItY2xvc2UtYnV0dG9uJykgY2xvc2VCdG46IGJvb2xlYW47XHJcbiAgQElucHV0KCdjbHMtcG9wb3ZlcicpIGNsc1BvcG92ZXI6IG51bWJlcjtcclxuXHJcbiAgcG9wb3Zlck9iajogYW55O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYsIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMiwgQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSBkb2N1bWVudCkge1xyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY3JlYXRlRWxlbWVudCgpIHtcclxuICAgIEF0dHJpYnV0ZUhlbHBlci5zZXRBdHRyaWJ1dGUodGhpcy5yZW5kZXJlciwgdGhpcy5lbGVtZW50LCAnZGF0YS1wb3BvdmVyLXRleHQnLCB0aGlzLnBvcG92ZXJUZXh0KTtcclxuICAgIEF0dHJpYnV0ZUhlbHBlci5zZXRBdHRyaWJ1dGUodGhpcy5yZW5kZXJlciwgdGhpcy5lbGVtZW50LCAnZGF0YS1wb3BvdmVyLXBvc2l0aW9uJywgdGhpcy5wb3BvdmVyUG9zaXRpb24pO1xyXG4gICAgQXR0cmlidXRlSGVscGVyLnNldEF0dHJpYnV0ZSh0aGlzLnJlbmRlcmVyLCB0aGlzLmVsZW1lbnQsICdkYXRhLXBvcG92ZXItdHJpZ2dlcicsIHRoaXMucG9wb3ZlclRyaWdnZXIpO1xyXG4gICAgQXR0cmlidXRlSGVscGVyLnNldEF0dHJpYnV0ZSh0aGlzLnJlbmRlcmVyLCB0aGlzLmVsZW1lbnQsICdkYXRhLXBvcG92ZXItaGlkZScsIHRoaXMucG9wb3ZlckhpZGUpO1xyXG4gICAgQXR0cmlidXRlSGVscGVyLnNldEF0dHJpYnV0ZSh0aGlzLnJlbmRlcmVyLCB0aGlzLmVsZW1lbnQsICdkYXRhLWNscy1wb3BvdmVyJywgdGhpcy5jbHNQb3BvdmVyKTtcclxuICAgIEF0dHJpYnV0ZUhlbHBlci5zZXRBdHRyaWJ1dGUodGhpcy5yZW5kZXJlciwgdGhpcy5lbGVtZW50LCAnZGF0YS1jbG9zZS1idXR0b24nLCB0aGlzLmNsb3NlQnRuKTtcclxuXHJcbiAgICBhc2FwU2NoZWR1bGVyLnNjaGVkdWxlKCgpID0+IHtcclxuICAgICAgaWYgKCF0aGlzLnBvcG92ZXJPYmopIHtcclxuICAgICAgICB0aGlzLnBvcG92ZXJPYmogPSAkKHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50KS5wb3BvdmVyKCkuZGF0YSgncG9wb3ZlcicpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucG9wb3Zlck9iai5vcHRpb25zLnBvcG92ZXJUZXh0ID0gdGhpcy5wb3BvdmVyVGV4dDtcclxuICAgICAgICB0aGlzLnBvcG92ZXJPYmoub3B0aW9ucy5wb3BvdmVyUG9zaXRpb24gPSB0aGlzLnBvcG92ZXJQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnBvcG92ZXJPYmoub3B0aW9ucy5wb3BvdmVyVHJpZ2dlciA9IHRoaXMucG9wb3ZlclRyaWdnZXI7XHJcbiAgICAgICAgdGhpcy5wb3BvdmVyT2JqLm9wdGlvbnMucG9wb3ZlckhpZGUgPSB0aGlzLnBvcG92ZXJIaWRlO1xyXG4gICAgICAgIHRoaXMucG9wb3Zlck9iai5vcHRpb25zLmNsb3NlQnV0dG9uID0gdGhpcy5jbG9zZUJ0bjtcclxuICAgICAgICB0aGlzLnBvcG92ZXJPYmoub3B0aW9ucy5jbHNQb3BvdmVyID0gdGhpcy5jbHNQb3BvdmVyO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5jcmVhdGVFbGVtZW50KCk7XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICB0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcclxuICB9XHJcblxyXG59XHJcbiJdfQ==