import { __decorate, __extends, __metadata } from "tslib";
import { ChangeDetectionStrategy, Component, ElementRef, Input, ViewChild } from '@angular/core';
import { DefaultValueAccessor } from '../../helper/default-value-accessor';
import { ControlBase } from '../control-base';
import { TypeAlias } from '../../helper/type-alias';
import { ObjectHelper } from '../../helper/object-helper';
var TagInputComponent = /** @class */ (function (_super) {
    __extends(TagInputComponent, _super);
    function TagInputComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.clearButton = true;
        _this.readonly = false;
        _this.backspace = true;
        return _this;
    }
    TagInputComponent_1 = TagInputComponent;
    TagInputComponent.prototype.createControl = function () {
        var _this = this;
        return new Promise(function (complete) {
            var originalElement = $(_this.input.nativeElement);
            ObjectHelper.hide(originalElement);
            if (_this.clonedElement) {
                _this.clonedElement.parent().remove();
            }
            _this.clonedElement = originalElement.clone();
            ObjectHelper.show(_this.clonedElement);
            originalElement.parent().append(_this.clonedElement);
            _this.tagInput = _this.clonedElement.taginput().data('taginput');
            _this.clonedElement.next('.input-wrapper').one('blur', function () {
                _this.touchCallback();
            });
            _this.tagInput.options.onTag = function (tag, val, vals) {
                _this.changeValue(vals.slice(0));
            };
            complete();
        });
    };
    TagInputComponent.prototype.disable = function (disabled) {
        if (this.tagInput) {
            var target = this.tagInput.element.parent('div.tag-input');
            if (target != null) {
                if (disabled) {
                    target.addClass('disabled');
                }
                else {
                    target.removeClass('disabled');
                }
            }
        }
    };
    TagInputComponent.prototype.newValue = function () {
        if (!this.tagInput) {
            return;
        }
        this.tagInput.clear();
        if (this.innerValue && this.innerValue.length > 0) {
            this.tagInput.val(this.innerValue);
        }
    };
    TagInputComponent.prototype.newClassValue = function (newClasses, oldClasses) {
        if (this.clonedElement) {
            var target_1 = this.clonedElement.parent();
            oldClasses.forEach(function (cls) {
                target_1.removeClass(cls);
            });
            newClasses.forEach(function (cls) {
                target_1.addClass(cls);
            });
        }
    };
    var TagInputComponent_1;
    __decorate([
        Input('random-color'),
        __metadata("design:type", Boolean)
    ], TagInputComponent.prototype, "randomColor", void 0);
    __decorate([
        Input('max-tags'),
        __metadata("design:type", Number)
    ], TagInputComponent.prototype, "maxTags", void 0);
    __decorate([
        Input('tag-trigger'),
        __metadata("design:type", Array)
    ], TagInputComponent.prototype, "tagTrigger", void 0);
    __decorate([
        Input('clear-button'),
        __metadata("design:type", Object)
    ], TagInputComponent.prototype, "clearButton", void 0);
    __decorate([
        Input('clear-button-icon'),
        __metadata("design:type", String)
    ], TagInputComponent.prototype, "clearButtonIcon", void 0);
    __decorate([
        Input('readonly'),
        __metadata("design:type", Object)
    ], TagInputComponent.prototype, "readonly", void 0);
    __decorate([
        Input('backspace'),
        __metadata("design:type", Object)
    ], TagInputComponent.prototype, "backspace", void 0);
    __decorate([
        Input('cls-tag'),
        __metadata("design:type", String)
    ], TagInputComponent.prototype, "clsTag", void 0);
    __decorate([
        Input('cls-tag-title'),
        __metadata("design:type", String)
    ], TagInputComponent.prototype, "clsTagTitle", void 0);
    __decorate([
        Input('cls-tag-remover'),
        __metadata("design:type", String)
    ], TagInputComponent.prototype, "clsTagRemover", void 0);
    __decorate([
        Input('cls-clear-button'),
        __metadata("design:type", String)
    ], TagInputComponent.prototype, "clsClearButton", void 0);
    __decorate([
        Input('cls-component'),
        __metadata("design:type", String)
    ], TagInputComponent.prototype, "clsComponent", void 0);
    __decorate([
        Input('cls-input'),
        __metadata("design:type", String)
    ], TagInputComponent.prototype, "clsInput", void 0);
    __decorate([
        ViewChild('input', { static: true }),
        __metadata("design:type", ElementRef)
    ], TagInputComponent.prototype, "input", void 0);
    TagInputComponent = TagInputComponent_1 = __decorate([
        Component({
            selector: 'm4-tag-input',
            template: "<input type=\"text\" #input\r\n\r\n\r\n       [readonly]=\"readonly\"\r\n\r\n       [attr.data-random-color]=\"randomColor\"\r\n       [attr.data-max-tags]=\"maxTags\"\r\n       [attr.data-tag-trigger]=\"tagTrigger?.join(',')\"\r\n       [attr.data-backspace]=\"backspace\"\r\n       [attr.data-clear-button]=\"clearButton\"\r\n       [attr.data-clear-button-icon]=\"clearButtonIcon\"\r\n\r\n       [attr.data-cls-tag]=\"clsTag\"\r\n       [attr.data-cls-tag-title]=\"clsTagTitle\"\r\n       [attr.data-cls-tag-remover]=\"clsTagRemover\"\r\n       [attr.data-cls-component]=\"clsComponent\"\r\n       [attr.data-cls-input]=\"clsInput\"\r\n       [attr.data-cls-clear-button]=\"clsClearButton\">\r\n",
            providers: [DefaultValueAccessor.get(TagInputComponent_1), TypeAlias.get(TagInputComponent_1)],
            changeDetection: ChangeDetectionStrategy.OnPush,
            styles: [""]
        })
    ], TagInputComponent);
    return TagInputComponent;
}(ControlBase));
export { TagInputComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFnLWlucHV0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25nLW1ldHJvNC8iLCJzb3VyY2VzIjpbImxpYi9mb3JtL3RhZy1pbnB1dC90YWctaW5wdXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUMsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQy9GLE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLHFDQUFxQyxDQUFDO0FBQ3pFLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUM1QyxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFDbEQsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLDRCQUE0QixDQUFDO0FBV3hEO0lBQXVDLHFDQUFxQjtJQUE1RDtRQUFBLHFFQXdGQztRQW5Gd0IsaUJBQVcsR0FBRyxJQUFJLENBQUM7UUFFdkIsY0FBUSxHQUFHLEtBQUssQ0FBQztRQUNoQixlQUFTLEdBQUcsSUFBSSxDQUFDOztJQWdGdkMsQ0FBQzswQkF4RlksaUJBQWlCO0lBcUI1Qix5Q0FBYSxHQUFiO1FBQUEsaUJBMEJDO1FBekJDLE9BQU8sSUFBSSxPQUFPLENBQU8sVUFBQyxRQUFRO1lBQ2hDLElBQU0sZUFBZSxHQUFHLENBQUMsQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3BELFlBQVksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7WUFFbkMsSUFBSSxLQUFJLENBQUMsYUFBYSxFQUFFO2dCQUN0QixLQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQ3RDO1lBRUQsS0FBSSxDQUFDLGFBQWEsR0FBRyxlQUFlLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDN0MsWUFBWSxDQUFDLElBQUksQ0FBQyxL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LENBQUM7OzREQUF1QjtJQUNyQjtRQUExQixLQUFLLENBQUMsa0JBQWtCLENBQUM7OzZEQUF3QjtJQUMxQjtRQUF2QixLQUFLLENBQUMsZUFBZSxDQUFDOzsyREFBc0I7SUFDekI7UUFBbkIsS0FBSyxDQUFDLFdBQVcsQ0FBQzs7dURBQWtCO0lBRUM7UUFBckMsU0FBUyxDQUFDLE9BQU8sRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQztrQ0FBZ0IsVUFBVTtvREFBQztJQWpCckQsaUJBQWlCO1FBUDdCLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxjQUFjO1lBQ3hCLHNzQkFBeUM7WUFFekMsU0FBUyxFQUFFLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLG1CQUFpQixDQUFDLEVBQUUsU0FBUyxDQUFDLEdBQUcsQ0FBQyxtQkFBaUIsQ0FBQyxDQUFDO1lBQzFGLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNOztTQUNoRCxDQUFDO09BQ1csaUJBQWlCLENBd0Y3QjtJQUFELHdCQUFDO0NBQUEsQUF4RkQsQ0FBdUMsV0FBVyxHQXdGakQ7U0F4RlksaUJBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBJbnB1dCwgVmlld0NoaWxkfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtEZWZhdWx0VmFsdWVBY2Nlc3Nvcn0gZnJvbSAnLi4vLi4vaGVscGVyL2RlZmF1bHQtdmFsdWUtYWNjZXNzb3InO1xyXG5pbXBvcnQge0NvbnRyb2xCYXNlfSBmcm9tICcuLi9jb250cm9sLWJhc2UnO1xyXG5pbXBvcnQge1R5cGVBbGlhc30gZnJvbSAnLi4vLi4vaGVscGVyL3R5cGUtYWxpYXMnO1xyXG5pbXBvcnQge09iamVjdEhlbHBlcn0gZnJvbSAnLi4vLi4vaGVscGVyL29iamVjdC1oZWxwZXInO1xyXG5cclxuZGVjbGFyZSB2YXIgJDogYW55O1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdtNC10YWctaW5wdXQnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi90YWctaW5wdXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3RhZy1pbnB1dC5jb21wb25lbnQuY3NzJ10sXHJcbiAgcHJvdmlkZXJzOiBbRGVmYXVsdFZhbHVlQWNjZXNzb3IuZ2V0KFRhZ0lucHV0Q29tcG9uZW50KSwgVHlwZUFsaWFzLmdldChUYWdJbnB1dENvbXBvbmVudCldLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBUYWdJbnB1dENvbXBvbmVudCBleHRlbmRzIENvbnRyb2xCYXNlPHN0cmluZ1tdPiB7XHJcblxyXG4gIEBJbnB1dCgncmFuZG9tLWNvbG9yJykgcmFuZG9tQ29sb3I6IGJvb2xlYW47XHJcbiAgQElucHV0KCdtYXgtdGFncycpIG1heFRhZ3M6IG51bWJlcjtcclxuICBASW5wdXQoJ3RhZy10cmlnZ2VyJykgdGFnVHJpZ2dlcjogc3RyaW5nW107XHJcbiAgQElucHV0KCdjbGVhci1idXR0b24nKSBjbGVhckJ1dHRvbiA9IHRydWU7XHJcbiAgQElucHV0KCdjbGVhci1idXR0b24taWNvbicpIGNsZWFyQnV0dG9uSWNvbjogc3RyaW5nO1xyXG4gIEBJbnB1dCgncmVhZG9ubHknKSByZWFkb25seSA9IGZhbHNlO1xyXG4gIEBJbnB1dCgnYmFja3NwYWNlJykgYmFja3NwYWNlID0gdHJ1ZTtcclxuXHJcbiAgQElucHV0KCdjbHMtdGFnJykgY2xzVGFnOiBzdHJpbmc7XHJcbiAgQElucHV0KCdjbHMtdGFnLXRpdGxlJykgY2xzVGFnVGl0bGU6IHN0cmluZztcclxuICBASW5wdXQoJ2Nscy10YWctcmVtb3ZlcicpIGNsc1RhZ1JlbW92ZXI6IHN0cmluZztcclxuICBASW5wdXQoJ2Nscy1jbGVhci1idXR0b24nKSBjbHNDbGVhckJ1dHRvbjogc3RyaW5nO1xyXG4gIEBJbnB1dCgnY2xzLWNvbXBvbmVudCcpIGNsc0NvbXBvbmVudDogc3RyaW5nO1xyXG4gIEBJbnB1dCgnY2xzLWlucHV0JykgY2xzSW5wdXQ6IHN0cmluZztcclxuXHJcbiAgQFZpZXdDaGlsZCgnaW5wdXQnLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIGlucHV0OiBFbGVtZW50UmVmO1xyXG4gIHByaXZhdGUgdGFnSW5wdXQ6IGFueTtcclxuICBwcml2YXRlIGNsb25lZEVsZW1lbnQ6IGFueTtcclxuXHJcbiAgY3JlYXRlQ29udHJvbCgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigoY29tcGxldGUpID0+IHtcclxuICAgICAgY29uc3Qgb3JpZ2luYWxFbGVtZW50ID0gJCh0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICBPYmplY3RIZWxwZXIuaGlkZShvcmlnaW5hbEVsZW1lbnQpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuY2xvbmVkRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY2xvbmVkRWxlbWVudC5wYXJlbnQoKS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jbG9uZWRFbGVtZW50ID0gb3JpZ2luYWxFbGVtZW50LmNsb25lKCk7XHJcbiAgICAgIE9iamVjdEhlbHBlci5zaG93KHRoaXMuY2xvbmVkRWxlbWVudCk7XHJcbiAgICAgIG9yaWdpbmFsRWxlbWVudC5wYXJlbnQoKS5hcHBlbmQodGhpcy5jbG9uZWRFbGVtZW50KTtcclxuXHJcbiAgICAgIHRoaXMudGFnSW5wdXQgPSB0aGlzLmNsb25lZEVsZW1lbnQudGFnaW5wdXQoKS5kYXRhKCd0YWdpbnB1dCcpO1xyXG5cclxuICAgICAgdGhpcy5jbG9uZWRFbGVtZW50Lm5leHQoJy5pbnB1dC13cmFwcGVyJykub25lKCdibHVyJywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMudG91Y2hDYWxsYmFjaygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMudGFnSW5wdXQub3B0aW9ucy5vblRhZyA9ICh0YWcsIHZhbCwgdmFscykgPT4ge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVmFsdWUodmFscy5zbGljZSgwKSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb21wbGV0ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbiAgZGlzYWJsZShkaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMudGFnSW5wdXQpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy50YWdJbnB1dC5lbGVtZW50LnBhcmVudCgnZGl2LnRhZy1pbnB1dCcpO1xyXG5cclxuICAgICAgaWYgKHRhcmdldCAhPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XHJcbiAgICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRhcmdldC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5ld1ZhbHVlKCk6IHZvaWQge1xyXG4gICAgaWYgKCF0aGlzLnRhZ0lucHV0KSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRhZ0lucHV0LmNsZWFyKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaW5uZXJWYWx1ZSAmJiB0aGlzLmlubmVyVmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLnRhZ0lucHV0LnZhbCh0aGlzLmlubmVyVmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV3Q2xhc3NWYWx1ZShuZXdDbGFzc2VzOiBzdHJpbmdbXSwgb2xkQ2xhc3Nlczogc3RyaW5nW10pIHtcclxuICAgIGlmICh0aGlzLmNsb25lZEVsZW1lbnQpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5jbG9uZWRFbGVtZW50LnBhcmVudCgpO1xyXG5cclxuICAgICAgb2xkQ2xhc3Nlcy5mb3JFYWNoKChjbHM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIHRhcmdldC5yZW1vdmVDbGFzcyhjbHMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIG5ld0NsYXNzZXMuZm9yRWFjaCgoY2xzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoY2xzKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==