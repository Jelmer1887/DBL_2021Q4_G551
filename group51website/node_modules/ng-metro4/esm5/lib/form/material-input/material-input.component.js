import { __decorate, __extends, __metadata } from "tslib";
import { ChangeDetectionStrategy, Component, ElementRef, Input, ViewChild } from '@angular/core';
import { DefaultValueAccessor } from '../../helper/default-value-accessor';
import { ControlBase } from '../control-base';
import { TypeAlias } from '../../helper/type-alias';
import { asapScheduler } from 'rxjs';
import { ObjectHelper } from '../../helper/object-helper';
var MaterialInputComponent = /** @class */ (function (_super) {
    __extends(MaterialInputComponent, _super);
    function MaterialInputComponent() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'text';
        _this.placeholder = '';
        _this.readonly = false;
        return _this;
    }
    MaterialInputComponent_1 = MaterialInputComponent;
    MaterialInputComponent.prototype.createControl = function () {
        var _this = this;
        return new Promise(function (complete) {
            var originalElement = $(_this.input.nativeElement);
            ObjectHelper.hide(originalElement);
            if (_this.clonedElement) {
                _this.clonedElement.parent().remove();
            }
            _this.clonedElement = originalElement.clone();
            ObjectHelper.show(_this.clonedElement);
            originalElement.parent().append(_this.clonedElement);
            _this.materialInput = _this.clonedElement.materialinput().data('materialinput');
            _this.clonedElement.one('blur', function () {
                _this.touchCallback();
            });
            _this.clonedElement.on('keydown change', function () {
                asapScheduler.schedule(function () {
                    var newValue = _this.clonedElement.val();
                    if (_this.type === 'number') {
                        newValue = +newValue;
                    }
                    _this.changeValue(newValue);
                }, 1);
            });
            complete();
        });
    };
    MaterialInputComponent.prototype.disable = function (disabled) {
        if (disabled) {
            this.clonedElement.attr('disabled', 'disabled');
            this.materialInput.disable();
        }
        else {
            this.clonedElement.removeAttr('disabled');
            this.materialInput.enable();
        }
    };
    MaterialInputComponent.prototype.newValue = function () {
        if (!this.materialInput) {
            return;
        }
        this.clonedElement.val(this.innerValue);
    };
    MaterialInputComponent.prototype.newClassValue = function (newClasses, oldClasses) {
        if (this.clonedElement) {
            var target_1 = this.clonedElement.parent();
            oldClasses.forEach(function (cls) {
                target_1.removeClass(cls);
            });
            newClasses.forEach(function (cls) {
                target_1.addClass(cls);
            });
        }
    };
    var MaterialInputComponent_1;
    __decorate([
        Input('type'),
        __metadata("design:type", String)
    ], MaterialInputComponent.prototype, "type", void 0);
    __decorate([
        Input('placeholder'),
        __metadata("design:type", Object)
    ], MaterialInputComponent.prototype, "placeholder", void 0);
    __decorate([
        Input('readonly'),
        __metadata("design:type", Object)
    ], MaterialInputComponent.prototype, "readonly", void 0);
    __decorate([
        Input('label'),
        __metadata("design:type", String)
    ], MaterialInputComponent.prototype, "label", void 0);
    __decorate([
        Input('informer'),
        __metadata("design:type", String)
    ], MaterialInputComponent.prototype, "informer", void 0);
    __decorate([
        Input('icon'),
        __metadata("design:type", String)
    ], MaterialInputComponent.prototype, "icon", void 0);
    __decorate([
        Input('cls-line'),
        __metadata("design:type", String)
    ], MaterialInputComponent.prototype, "clsLine", void 0);
    __decorate([
        Input('cls-label'),
        __metadata("design:type", String)
    ], MaterialInputComponent.prototype, "clsLabel", void 0);
    __decorate([
        Input('cls-informer'),
        __metadata("design:type", String)
    ], MaterialInputComponent.prototype, "clsInformer", void 0);
    __decorate([
        Input('cls-icon'),
        __metadata("design:type", String)
    ], MaterialInputComponent.prototype, "clsIcon", void 0);
    __decorate([
        ViewChild('input', { static: true }),
        __metadata("design:type", ElementRef)
    ], MaterialInputComponent.prototype, "input", void 0);
    MaterialInputComponent = MaterialInputComponent_1 = __decorate([
        Component({
            selector: 'm4-material-input',
            template: "<input [type]=\"type\" #input\r\n\r\n\r\n       [placeholder]=\"placeholder\"\r\n       [readonly]=\"readonly\"\r\n\r\n       [attr.data-icon]=\"icon\"\r\n       [attr.data-label]=\"label\"\r\n       [attr.data-informer]=\"informer\"\r\n       [attr.data-cls-line]=\"clsLine\"\r\n       [attr.data-cls-label]=\"clsLabel\"\r\n       [attr.data-cls-informer]=\"clsInformer\"\r\n       [attr.data-cls-icon]=\"clsIcon\">\r\n",
            providers: [DefaultValueAccessor.get(MaterialInputComponent_1), TypeAlias.get(MaterialInputComponent_1)],
            changeDetection: ChangeDetectionStrategy.OnPush,
            styles: [""]
        })
    ], MaterialInputComponent);
    return MaterialInputComponent;
}(ControlBase));
export { MaterialInputComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0ZXJpYWwtaW5wdXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctbWV0cm80LyIsInNvdXJjZXMiOlsibGliL2Zvcm0vbWF0ZXJpYWwtaW5wdXQvbWF0ZXJpYWwtaW5wdXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUMsdUJBQXVCLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQy9GLE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLHFDQUFxQyxDQUFDO0FBQ3pFLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUM1QyxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFDbEQsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLE1BQU0sQ0FBQztBQUNuQyxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sNEJBQTRCLENBQUM7QUFZeEQ7SUFBNEMsMENBQW1CO0lBQS9EO1FBQUEscUVBcUZDO1FBbkZnQixVQUFJLEdBQWMsTUFBTSxDQUFDO1FBQ2xCLGlCQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLGNBQVEsR0FBRyxLQUFLLENBQUM7O0lBaUZ0QyxDQUFDOytCQXJGWSxzQkFBc0I7SUFpQmpDLDhDQUFhLEdBQWI7UUFBQSxpQkFrQ0M7UUFqQ0MsT0FBTyxJQUFJLE9BQU8sQ0FBTyxVQUFDLFFBQVE7WUFDaEMsSUFBTSxlQUFlLEdBQUcsQ0FBQyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDcEQsWUFBWSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUVuQyxJQUFJLEtBQUksQ0FBQyxhQUFhLEVBQUU7Z0JBQ3RCLEtBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUM7YUFDdEM7WUFFRCxLQUFJLENBQUMsYUFBYSxH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QyxVQUFVLENBQUM7OzJEQUFpQjtJQUVHO1FBQXJDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUM7a0NBQWdCLFVBQVU7eURBQUM7SUFickQsc0JBQXNCO1FBUGxDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxtQkFBbUI7WUFDN0IsZ2JBQThDO1lBRTlDLFNBQVMsRUFBRSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyx3QkFBc0IsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxHQUFHLENBQUMsd0JBQXNCLENBQUMsQ0FBQztZQUNwRyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTs7U0FDaEQsQ0FBQztPQUNXLHNCQUFzQixDQXFGbEM7SUFBRCw2QkFBQztDQUFBLEFBckZELENBQTRDLFdBQVcsR0FxRnREO1NBckZZLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgRWxlbWVudFJlZiwgSW5wdXQsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7RGVmYXVsdFZhbHVlQWNjZXNzb3J9IGZyb20gJy4uLy4uL2hlbHBlci9kZWZhdWx0LXZhbHVlLWFjY2Vzc29yJztcclxuaW1wb3J0IHtDb250cm9sQmFzZX0gZnJvbSAnLi4vY29udHJvbC1iYXNlJztcclxuaW1wb3J0IHtUeXBlQWxpYXN9IGZyb20gJy4uLy4uL2hlbHBlci90eXBlLWFsaWFzJztcclxuaW1wb3J0IHthc2FwU2NoZWR1bGVyfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHtPYmplY3RIZWxwZXJ9IGZyb20gJy4uLy4uL2hlbHBlci9vYmplY3QtaGVscGVyJztcclxuaW1wb3J0IHtJbnB1dFR5cGV9IGZyb20gJy4uLy4uL2hlbHBlci90eXBlcyc7XHJcblxyXG5kZWNsYXJlIHZhciAkOiBhbnk7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ200LW1hdGVyaWFsLWlucHV0JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vbWF0ZXJpYWwtaW5wdXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL21hdGVyaWFsLWlucHV0LmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6IFtEZWZhdWx0VmFsdWVBY2Nlc3Nvci5nZXQoTWF0ZXJpYWxJbnB1dENvbXBvbmVudCksIFR5cGVBbGlhcy5nZXQoTWF0ZXJpYWxJbnB1dENvbXBvbmVudCldLFxyXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBNYXRlcmlhbElucHV0Q29tcG9uZW50IGV4dGVuZHMgQ29udHJvbEJhc2U8c3RyaW5nPiB7XHJcblxyXG4gIEBJbnB1dCgndHlwZScpIHR5cGU6IElucHV0VHlwZSA9ICd0ZXh0JztcclxuICBASW5wdXQoJ3BsYWNlaG9sZGVyJykgcGxhY2Vob2xkZXIgPSAnJztcclxuICBASW5wdXQoJ3JlYWRvbmx5JykgcmVhZG9ubHkgPSBmYWxzZTtcclxuICBASW5wdXQoJ2xhYmVsJykgbGFiZWw6IHN0cmluZztcclxuICBASW5wdXQoJ2luZm9ybWVyJykgaW5mb3JtZXI6IHN0cmluZztcclxuICBASW5wdXQoJ2ljb24nKSBpY29uOiBzdHJpbmc7XHJcbiAgQElucHV0KCdjbHMtbGluZScpIGNsc0xpbmU6IHN0cmluZztcclxuICBASW5wdXQoJ2Nscy1sYWJlbCcpIGNsc0xhYmVsOiBzdHJpbmc7XHJcbiAgQElucHV0KCdjbHMtaW5mb3JtZXInKSBjbHNJbmZvcm1lcjogc3RyaW5nO1xyXG4gIEBJbnB1dCgnY2xzLWljb24nKSBjbHNJY29uOiBzdHJpbmc7XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2lucHV0JywgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSBpbnB1dDogRWxlbWVudFJlZjtcclxuICBwcml2YXRlIG1hdGVyaWFsSW5wdXQ6IGFueTtcclxuICBwcml2YXRlIGNsb25lZEVsZW1lbnQ6IGFueTtcclxuXHJcbiAgY3JlYXRlQ29udHJvbCgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigoY29tcGxldGUpID0+IHtcclxuICAgICAgY29uc3Qgb3JpZ2luYWxFbGVtZW50ID0gJCh0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQpO1xyXG4gICAgICBPYmplY3RIZWxwZXIuaGlkZShvcmlnaW5hbEVsZW1lbnQpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuY2xvbmVkRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuY2xvbmVkRWxlbWVudC5wYXJlbnQoKS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jbG9uZWRFbGVtZW50ID0gb3JpZ2luYWxFbGVtZW50LmNsb25lKCk7XHJcbiAgICAgIE9iamVjdEhlbHBlci5zaG93KHRoaXMuY2xvbmVkRWxlbWVudCk7XHJcbiAgICAgIG9yaWdpbmFsRWxlbWVudC5wYXJlbnQoKS5hcHBlbmQodGhpcy5jbG9uZWRFbGVtZW50KTtcclxuXHJcbiAgICAgIHRoaXMubWF0ZXJpYWxJbnB1dCA9IHRoaXMuY2xvbmVkRWxlbWVudC5tYXRlcmlhbGlucHV0KCkuZGF0YSgnbWF0ZXJpYWxpbnB1dCcpO1xyXG5cclxuICAgICAgdGhpcy5jbG9uZWRFbGVtZW50Lm9uZSgnYmx1cicsICgpID0+IHtcclxuICAgICAgICB0aGlzLnRvdWNoQ2FsbGJhY2soKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmNsb25lZEVsZW1lbnQub24oJ2tleWRvd24gY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgIGFzYXBTY2hlZHVsZXIuc2NoZWR1bGUoKCkgPT4ge1xyXG4gICAgICAgICAgbGV0IG5ld1ZhbHVlID0gdGhpcy5jbG9uZWRFbGVtZW50LnZhbCgpO1xyXG5cclxuICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gK25ld1ZhbHVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRoaXMuY2hhbmdlVmFsdWUobmV3VmFsdWUpO1xyXG4gICAgICAgIH0sIDEpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbXBsZXRlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBkaXNhYmxlKGRpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICBpZiAoZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5jbG9uZWRFbGVtZW50LmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMubWF0ZXJpYWxJbnB1dC5kaXNhYmxlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsb25lZEVsZW1lbnQucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5tYXRlcmlhbElucHV0LmVuYWJsZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV3VmFsdWUoKTogdm9pZCB7XHJcbiAgICBpZiAoIXRoaXMubWF0ZXJpYWxJbnB1dCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jbG9uZWRFbGVtZW50LnZhbCh0aGlzLmlubmVyVmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgbmV3Q2xhc3NWYWx1ZShuZXdDbGFzc2VzOiBzdHJpbmdbXSwgb2xkQ2xhc3Nlczogc3RyaW5nW10pIHtcclxuICAgIGlmICh0aGlzLmNsb25lZEVsZW1lbnQpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5jbG9uZWRFbGVtZW50LnBhcmVudCgpO1xyXG5cclxuICAgICAgb2xkQ2xhc3Nlcy5mb3JFYWNoKChjbHM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIHRhcmdldC5yZW1vdmVDbGFzcyhjbHMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIG5ld0NsYXNzZXMuZm9yRWFjaCgoY2xzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoY2xzKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=